*&---------------------------------------------------------------------*
*& Report zr_xrm_prepare_data
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
REPORT zr_xrm_prepare_data.

DATA: lr_data TYPE REF TO data,
      src     TYPE string_table,
      json    TYPE string.
FIELD-SYMBOLS <lt_tab> TYPE STANDARD TABLE.

src = VALUE #(
  ( `{"DATA":[` )
  ( `{"ID":"514822a4fccc4a9c8c398a0ae8ddc8de", "NAME": "Default Project"}` )
  ( `]}` )
).
CONCATENATE LINES OF src INTO json.
CREATE DATA lr_data TYPE STANDARD TABLE OF ('ZXRM_PROJECT').
ASSIGN lr_data->* TO <lt_tab>.
CALL TRANSFORMATION id SOURCE XML json RESULT data = <lt_tab>.
MODIFY ('ZXRM_PROJECT') FROM TABLE <lt_tab>.
WRITE: / 'PROJECT ', sy-dbcnt, 'rows'.

src = VALUE #(
  ( `{"DATA":[` )
  ( `{"ID":"270a2d94995b422593cae2ff74f1be23", "NAME": "Entity"}` )
  ( `]}` )
).
CONCATENATE LINES OF src INTO json.
CREATE DATA lr_data TYPE STANDARD TABLE OF ('ZXRM_ENTITY').
ASSIGN lr_data->* TO <lt_tab>.
CALL TRANSFORMATION id SOURCE XML json RESULT data = <lt_tab>.
MODIFY ('ZXRM_ENTITY') FROM TABLE <lt_tab>.
WRITE: / 'ENTITY', sy-dbcnt, 'rows'.
COMMIT WORK.

data: lt_entities type standard table of zxrm_entity.
lt_entities = VALUE #( ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316000864' NAME ='Account'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316002864' NAME ='ActivityPointer'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316004864' NAME ='Appointment'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316006864' NAME ='Campaign'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316008864' NAME ='CampaignActivity'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31600A864' NAME ='CampaignResponse'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31600C864' NAME ='Competitor'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31600E864' NAME ='Contact'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316010864' NAME ='Email'  )
 ( MANDT ='001' ID ='270a2d94995b422593cae2ff74f1be23' NAME ='Entity'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316012864' NAME ='Inf_client'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316014864' NAME ='Inf_config'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316018864' NAME ='Inf_fusion'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31601C864' NAME ='Inf_leiter'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31601E864' NAME ='Inf_merkmalkategorie'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316022864' NAME ='Inf_produktkategorie'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316024864' NAME ='Inf_projekt'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316026864' NAME ='Inf_quote'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316028864' NAME ='Inf_quote_audit'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31602A864' NAME ='Inf_vertragsdatenbank'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31602E864' NAME ='Inx_action'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316030864' NAME ='List'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316032864' NAME ='Opportunity'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316034864' NAME ='PhoneCall'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316036864' NAME ='Product'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316038864' NAME ='Queue'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31603A864' NAME ='QueueItem'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31603C864' NAME ='ReportCategory'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31603E864' NAME ='SystemUser'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316040864' NAME ='Task'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316042864' NAME ='TransactionCurrency'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316044864' NAME ='Workflow'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316016864' NAME ='inf_fachbereich'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31601A864' NAME ='inf_geschaeftsbereich'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B316020864' NAME ='inf_produktgruppe'  )
 ( MANDT ='001' ID ='000D3A78B1951EDA98A777B31602C864' NAME ='inf_vertragsdetail'  )
 ).
